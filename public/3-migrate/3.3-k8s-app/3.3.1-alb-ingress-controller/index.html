<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.124.0">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>AWS ALB Ingress Controller :: AWS System Manager</title>

    
    <link href="/css/nucleus.css?1711032814" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1711032814" rel="stylesheet">
    <link href="/css/hybrid.css?1711032814" rel="stylesheet">
    <link href="/css/featherlight.min.css?1711032814" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1711032814" rel="stylesheet">
    <link href="/css/auto-complete.css?1711032814" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1711032814" rel="stylesheet">
    <link href="/css/theme.css?1711032814" rel="stylesheet">
    <link href="/css/hugo-theme.css?1711032814" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1711032814" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1711032814"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/3-migrate/3.3-k8s-app/3.3.1-alb-ingress-controller/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1711032814"></script>
<script type="text/javascript" src="/js/auto-complete.js?1711032814"></script>
<script type="text/javascript">
    
        var baseurl = "\/\/localhost:1313\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1711032814"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/1-problem/" title="Problem" class="dd-item 
        
        
        
        ">
      <a href="/1-problem/">
           <b> 1. </b> Problem
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/2-architecture/" title="Architecture " class="dd-item 
        
        
        
        ">
      <a href="/2-architecture/">
           <b> 2. </b> Architecture 
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/2-architecture/2.1-on-prem/" title="Current architecture of the Kubernetes system on On-premises environment" class="dd-item 
        
        
        
        ">
      <a href="/2-architecture/2.1-on-prem/">
           <b> 2.1 </b> Current architecture of the Kubernetes system on On-premises environment
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/2-architecture/2.1-on-prem/2.1.1-k8s-cluster/" title="Kubernetes cluster architecture on On-premises environment" class="dd-item 
        
        
        
        ">
      <a href="/2-architecture/2.1-on-prem/2.1.1-k8s-cluster/">
           <b> 2.1.1 </b> Kubernetes cluster architecture on On-premises environment
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-architecture/2.1-on-prem/2.1.2-k8s-app/" title="The application architecture is deployed using Kubernetes on On-premises environment" class="dd-item 
        
        
        
        ">
      <a href="/2-architecture/2.1-on-prem/2.1.2-k8s-app/">
           <b> 2.1.2 </b> The application architecture is deployed using Kubernetes on On-premises environment
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-architecture/2.2-cloud/" title="System architecture when deployed to AWS EKS cluster" class="dd-item 
        
        
        
        ">
      <a href="/2-architecture/2.2-cloud/">
           <b> 2.2 </b> System architecture when deployed to AWS EKS cluster
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/3-migrate/" title="Migrate service from On-premises environment to AWS cloud environment" class="dd-item 
        parent
        
        
        ">
      <a href="/3-migrate/">
           <b> 3. </b> Migrate service from On-premises environment to AWS cloud environment
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.1-setup-tools/" title="Create Bastion Host and install the necessary tools" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.1-setup-tools/">
           <b> 3.1. </b> Create Bastion Host and install the necessary tools
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.1-setup-tools/3.1.1-create-ec2-instance/" title="Create Bastion host" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.1-setup-tools/3.1.1-create-ec2-instance/">
           <b> 3.1.1 </b> Create Bastion host
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.1-setup-tools/3.1.2-create-access-secret-key/" title="Create access key &amp; secret key" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.1-setup-tools/3.1.2-create-access-secret-key/">
           <b> 3.1.2 </b> Create access key &amp; secret key
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.1-setup-tools/3.1.3-instance-connect/" title="Setup Instance Connect to access Bastion host via ssh protocol" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.1-setup-tools/3.1.3-instance-connect/">
           <b> 3.1.3 </b> Setup Instance Connect to access Bastion host via ssh protocol
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.1-setup-tools/3.1.4-awscli/" title="Install awscli tool" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.1-setup-tools/3.1.4-awscli/">
           <b> 3.1.4 </b> Install awscli tool
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.1-setup-tools/3.1.5-eksctl/" title="Install eksctl tool" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.1-setup-tools/3.1.5-eksctl/">
           <b> 3.1.5 </b> Install eksctl tool
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.1-setup-tools/3.1.6-kubectl/" title="Install kubectl tool" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.1-setup-tools/3.1.6-kubectl/">
           <b> 3.1.6 </b> Install kubectl tool
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.1-setup-tools/3.1.7-terraform/" title="Install Terraform tool" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.1-setup-tools/3.1.7-terraform/">
           <b> 3.1.7 </b> Install Terraform tool
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.2-terraform/" title="Build Infrastucture on AWS Cloud environment using Terraform" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.2-terraform/">
           <b> 3.2. </b> Build Infrastucture on AWS Cloud environment using Terraform
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.2-terraform/3.2.1-vpc-subnet/" title="Create AWS VPC &amp; Subnets using Terraform" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.2-terraform/3.2.1-vpc-subnet/">
           <b> 3.2.1 </b> Create AWS VPC &amp; Subnets using Terraform
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.2-terraform/3.2.2-igw/" title="Create Internet Gateway in AWS using Terraform" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.2-terraform/3.2.2-igw/">
           <b> 3.2.2 </b> Create Internet Gateway in AWS using Terraform
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.2-terraform/3.2.3-nat/" title="Create NAT Gateway in AWS using Terraform" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.2-terraform/3.2.3-nat/">
           <b> 3.2.3 </b> Create NAT Gateway in AWS using Terraform
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.2-terraform/3.2.4-routetable/" title="Create Route Table in AWS using Terraform" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.2-terraform/3.2.4-routetable/">
           <b> 3.2.4 </b> Create Route Table in AWS using Terraform
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.2-terraform/3.2.5-eks-cluster/" title="Create EKS cluster using Terraform" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.2-terraform/3.2.5-eks-cluster/">
           <b> 3.2.5 </b> Create EKS cluster using Terraform
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.2-terraform/3.2.6-oidc/" title="Create IAM OIDC provider EKS using Terraform" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.2-terraform/3.2.6-oidc/">
           <b> 3.2.6 </b> Create IAM OIDC provider EKS using Terraform
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.2-terraform/3.2.7-access-eks-cluster/" title="Access to EKS cluster" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.2-terraform/3.2.7-access-eks-cluster/">
           <b> 3.2.7 </b> Access to EKS cluster
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.3-k8s-app/" title="Deploy App-phonebook architecture using Kubernetes platform on AWS EKS cluster on AWS cloud environment" class="dd-item 
        parent
        
        
        ">
      <a href="/3-migrate/3.3-k8s-app/">
           <b> 3.3. </b> Deploy App-phonebook architecture using Kubernetes platform on AWS EKS cluster on AWS cloud environment
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.3-k8s-app/3.3.1-alb-ingress-controller/" title="AWS ALB Ingress Controller" class="dd-item 
        
        active
        
        ">
      <a href="/3-migrate/3.3-k8s-app/3.3.1-alb-ingress-controller/">
           <b> 3.3.1 </b> AWS ALB Ingress Controller
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.3-k8s-app/3.3.2-alb-ingress-manifest/" title="Create ALB Ingress manifest file" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.3-k8s-app/3.3.2-alb-ingress-manifest/">
           <b> 3.3.2 </b> Create ALB Ingress manifest file
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.3-k8s-app/3.3.3-web/" title="Module web server" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.3-k8s-app/3.3.3-web/">
           <b> 3.3.3 </b> Module web server
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.3-k8s-app/3.3.4-result/" title="Module result server" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.3-k8s-app/3.3.4-result/">
           <b> 3.3.4 </b> Module result server
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-migrate/3.3-k8s-app/3.3.5-mysql/" title="Module MySQL database" class="dd-item 
        
        
        
        ">
      <a href="/3-migrate/3.3-k8s-app/3.3.5-mysql/">
           <b> 3.3.5 </b> Module MySQL database
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/4-backup-restore/" title="Backup &amp; restore application data from on-premises enviroment to AWS cloud enviroment" class="dd-item 
        
        
        
        ">
      <a href="/4-backup-restore/">
           <b> 4. </b> Backup &amp; restore application data from on-premises enviroment to AWS cloud enviroment
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/4-backup-restore/4.1-backup/" title="Backup mysql database trên môi trường On-premsise" class="dd-item 
        
        
        
        ">
      <a href="/4-backup-restore/4.1-backup/">
           <b> 4.1 </b> Backup mysql database trên môi trường On-premsise
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/4-backup-restore/4.2-push/" title="Push mysql backup file from On-premsise enviroment to AWS cloud enviroment using awscli" class="dd-item 
        
        
        
        ">
      <a href="/4-backup-restore/4.2-push/">
           <b> 4.2 </b> Push mysql backup file from On-premsise enviroment to AWS cloud enviroment using awscli
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/4-backup-restore/4.3-restore/" title="Restore data for mysql database on AWS cloud enviroment" class="dd-item 
        
        
        
        ">
      <a href="/4-backup-restore/4.3-restore/">
           <b> 4.3 </b> Restore data for mysql database on AWS cloud enviroment
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/5-clear/" title="Clean up resources" class="dd-item 
        
        
        
        ">
      <a href="/5-clear/">
           <b> 5. </b> Clean up resources
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="//localhost:1313/3-migrate/3.3-k8s-app/3.3.1-alb-ingress-controller/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="//localhost:1313/vi/3-migrate/3.3-k8s-app/3.3.1-alb-ingress-controller/">Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>30-01-2022</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
            <i> <a href="https://www.linkedin.com/in/sutrinh/"  style="color:orange">Sử Trịnh  </a> <br>
                <a href="https://www.linkedin.com/in/jotaguy"  style="color:orange">Gia Hưng </a> <br>
                <a href="https://www.linkedin.com/in/hiepnguyendt"  style="color:orange">Thanh Hiệp </a>
               
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Overall</a> > <a href='/3-migrate/'>Migrate service from On-premises environment to AWS cloud environment</a> > <a href='/3-migrate/3.3-k8s-app/'>Deploy App-phonebook architecture using Kubernetes platform on AWS EKS cluster on AWS cloud environment</a> > AWS ALB Ingress Controller
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents"></nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              AWS ALB Ingress Controller
            </h1>
          

        



	<p>At this time, app-phonebook has been deployed in Private Subnet, so if you need to expose App to the Internet, we need to deploy AWS Load balancer in Public Subnet pointing to App-phonebook in Private Subnet.</p>
<p>Amazon Application Load Balancer (ALB) is a popular AWS service that load balances incoming traffic at the application layer (layer 7) across multiple targets, such as Amazon EC2 instances, in a region. ALB supports multiple features including host or path based routing, TLS (Transport Layer Security) termination, WebSockets, HTTP/2, AWS WAF (Web Application Firewall) integration, integrated access logs, and health checks.</p>
<p>Kubernetes Ingress is an API resource that allows you manage external or internal HTTP(S) access to Kubernetes services running in a cluster</p>
<p>The open source AWS ALB Ingress controller triggers the creation of an ALB and the necessary supporting AWS resources whenever a Kubernetes user declares an Ingress resource in the cluster. The Ingress resource uses the ALB to route HTTP(S) traffic to different endpoints within the cluster. The AWS ALB Ingress controller works on any Kubernetes cluster including Amazon Elastic Kubernetes Service (Amazon EKS).</p>
<p><strong>How AWS Load Balancer controller works:</strong></p>
<p><img alt="???" src="/images/003.5-k8s-app/1.png"></p>
<p><strong>[1]:</strong> The controller watches for ingress events from the API server. When it finds ingress resources that satisfy its requirements, it begins the creation of AWS resources.</p>
<p><strong>[2]:</strong> An ALB (ELBv2) is created in AWS for the new ingress resource. This ALB can be internet-facing or internal. You can also specify the subnets it&rsquo;s created in using annotations.</p>
<p><strong>[3]:</strong> Target Groups are created in AWS for each unique Kubernetes service described in the ingress resource.</p>
<p><strong>[4]:</strong> Listeners are created for every port detailed in your ingress resource annotations. When no port is specified, sensible defaults (80 or 443) are used. Certificates may also be attached via annotations.</p>
<p><strong>[5]:</strong> Rules are created for each path specified in your ingress resource. This ensures traffic to a specific path is routed to the correct Kubernetes Service.</p>
<p>Along with the above, the controller also&hellip;</p>
<ul>
<li>deletes AWS components when ingress resources are removed from k8s.</li>
<li>modifies AWS components when ingress resources change in k8s.</li>
<li>assembles a list of existing ingress-related AWS components on start-up, allowing you to recover if the controller were to be restarted.</li>
</ul>
<p>AWS Load Balancer controller supports two traffic modes:</p>
<ul>
<li><strong>Instance mode:</strong> Ingress traffic starts at the ALB and reaches the Kubernetes nodes through each service&rsquo;s NodePort. This means that services referenced from ingress resources must be exposed by type:NodePort in order to be reached by the ALB.</li>
<li><strong>IP mode:</strong> Ingress traffic starts at the ALB and reaches the Kubernetes pods directly. CNIs must support directly accessible POD ip via secondary IP addresses on ENI (Ref: <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html</a>)
By default, Instance mode is used, users can explicitly select the mode via alb.ingress.kubernetes.io/target-type annotation.</li>
</ul>
<p><strong>Install AWS ALB Ingress Controller:</strong></p>
<p><strong>Step 1:</strong> Create Kubernetes RBAC role &amp; Service Account for ALB Ingress Controller.</p>
<p>We will create manifest file to create permission for aws-load-balancer-controller, then apply it:</p>
<pre><code>  cat &lt;&lt;EOF &gt; rbac-role-aws-load-balancer-controller.yaml
  ---
  apiVersion: rbac.authorization.k8s.io/v1
  kind: ClusterRole
  metadata:
  labels:
     app.kubernetes.io/name: aws-load-balancer-controller
  name: aws-load-balancer-controller
  rules:
  - apiGroups:
        - &quot;&quot;
        - extensions
     resources:
        - configmaps
        - endpoints
        - events
        - ingresses
        - ingresses/status
        - services
        - pods/status
     verbs:
        - create
        - get
        - list
        - update
        - watch
        - patch
  - apiGroups:
        - &quot;&quot;
        - extensions
     resources:
        - nodes
        - pods
        - secrets
        - services
        - namespaces
     verbs:
        - get
        - list
        - watch
  ---
  apiVersion: rbac.authorization.k8s.io/v1
  kind: ClusterRoleBinding
  metadata:
  labels:
     app.kubernetes.io/name: aws-load-balancer-controller
  name: aws-load-balancer-controller
  roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: aws-load-balancer-controller
  subjects:
  - kind: ServiceAccount
     name: aws-load-balancer-controller
     namespace: kube-system
  ---
  apiVersion: v1
  kind: ServiceAccount
  metadata:
  labels:
     app.kubernetes.io/name: aws-load-balancer-controller
  name: aws-load-balancer-controller
  namespace: kube-system
  ...
  EOF

  kubectl apply -f rbac-role-aws-load-balancer-controller.yaml
</code></pre>
<p><strong>Step 2.</strong> Create IAM Policy for ALB Ingress Controller</p>
<p>This IAM policy will allow our ALB Ingress Controller pod to make calls to AWS APIs</p>
<p><strong>Step 2.1:</strong> Go to IAM Service: <a href="https://us-east-1.console.aws.amazon.com/iam/home?region=us-east-1">https://us-east-1.console.aws.amazon.com/iam/home?region=us-east-1</a></p>
<p><strong>Step 2.2:</strong> Select Policies, then click to Create Policies:
<img alt="???" src="/images/003.5-k8s-app/2.png"></p>
<p><strong>Step 2.3:</strong> Enter policy for ALB Ingress Controller as bellow:</p>
<pre><code>  {
     &quot;Version&quot;: &quot;2012-10-17&quot;,
     &quot;Statement&quot;: [
        {
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Action&quot;: [
                 &quot;acm:DescribeCertificate&quot;,
                 &quot;acm:ListCertificates&quot;,
                 &quot;acm:GetCertificate&quot;,
                 &quot;ec2:*&quot;
              ],
              &quot;Resource&quot;: &quot;*&quot;
        },
        {
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Action&quot;: [
                 &quot;ec2:AuthorizeSecurityGroupIngress&quot;,
                 &quot;ec2:CreateSecurityGroup&quot;,
                 &quot;ec2:CreateTags&quot;,
                 &quot;ec2:DeleteTags&quot;,
                 &quot;ec2:DeleteSecurityGroup&quot;,
                 &quot;ec2:DescribeAccountAttributes&quot;,
                 &quot;ec2:DescribeAddresses&quot;,
                 &quot;ec2:DescribeInstances&quot;,
                 &quot;ec2:DescribeInstanceStatus&quot;,
                 &quot;ec2:DescribeInternetGateways&quot;,
                 &quot;ec2:DescribeNetworkInterfaces&quot;,
                 &quot;ec2:DescribeSecurityGroups&quot;,
                 &quot;ec2:DescribeSubnets&quot;,
                 &quot;ec2:DescribeTags&quot;,
                 &quot;ec2:DescribeVpcs&quot;,
                 &quot;ec2:ModifyInstanceAttribute&quot;,
                 &quot;ec2:ModifyNetworkInterfaceAttribute&quot;,
                 &quot;ec2:RevokeSecurityGroupIngress&quot;
              ],
              &quot;Resource&quot;: &quot;*&quot;
        },
        {
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Action&quot;: [
                 &quot;elasticloadbalancing:AddListenerCertificates&quot;,
                 &quot;elasticloadbalancing:AddTags&quot;,
                 &quot;elasticloadbalancing:CreateListener&quot;,
                 &quot;elasticloadbalancing:CreateLoadBalancer&quot;,
                 &quot;elasticloadbalancing:CreateRule&quot;,
                 &quot;elasticloadbalancing:CreateTargetGroup&quot;,
                 &quot;elasticloadbalancing:DeleteListener&quot;,
                 &quot;elasticloadbalancing:DeleteLoadBalancer&quot;,
                 &quot;elasticloadbalancing:DeleteRule&quot;,
                 &quot;elasticloadbalancing:DeleteTargetGroup&quot;,
                 &quot;elasticloadbalancing:DeregisterTargets&quot;,
                 &quot;elasticloadbalancing:DescribeListenerCertificates&quot;,
                 &quot;elasticloadbalancing:DescribeListeners&quot;,
                 &quot;elasticloadbalancing:DescribeLoadBalancers&quot;,
                 &quot;elasticloadbalancing:DescribeLoadBalancerAttributes&quot;,
                 &quot;elasticloadbalancing:DescribeRules&quot;,
                 &quot;elasticloadbalancing:DescribeSSLPolicies&quot;,
                 &quot;elasticloadbalancing:DescribeTags&quot;,
                 &quot;elasticloadbalancing:DescribeTargetGroups&quot;,
                 &quot;elasticloadbalancing:DescribeTargetGroupAttributes&quot;,
                 &quot;elasticloadbalancing:DescribeTargetHealth&quot;,
                 &quot;elasticloadbalancing:ModifyListener&quot;,
                 &quot;elasticloadbalancing:ModifyLoadBalancerAttributes&quot;,
                 &quot;elasticloadbalancing:ModifyRule&quot;,
                 &quot;elasticloadbalancing:ModifyTargetGroup&quot;,
                 &quot;elasticloadbalancing:ModifyTargetGroupAttributes&quot;,
                 &quot;elasticloadbalancing:RegisterTargets&quot;,
                 &quot;elasticloadbalancing:RemoveListenerCertificates&quot;,
                 &quot;elasticloadbalancing:RemoveTags&quot;,
                 &quot;elasticloadbalancing:SetIpAddressType&quot;,
                 &quot;elasticloadbalancing:SetSecurityGroups&quot;,
                 &quot;elasticloadbalancing:SetSubnets&quot;,
                 &quot;elasticloadbalancing:SetWebAcl&quot;
              ],
              &quot;Resource&quot;: &quot;*&quot;
        },
        {
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Action&quot;: [
                 &quot;iam:CreateServiceLinkedRole&quot;,
                 &quot;iam:GetServerCertificate&quot;,
                 &quot;iam:ListServerCertificates&quot;
              ],
              &quot;Resource&quot;: &quot;*&quot;
        },
        {
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Action&quot;: [
                 &quot;cognito-idp:DescribeUserPoolClient&quot;,
                 &quot;eks:*&quot;
              ],
              &quot;Resource&quot;: &quot;*&quot;
        },
        {
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Action&quot;: [
                 &quot;waf-regional:GetWebACLForResource&quot;,
                 &quot;waf-regional:GetWebACL&quot;,
                 &quot;waf-regional:AssociateWebACL&quot;,
                 &quot;waf-regional:DisassociateWebACL&quot;
              ],
              &quot;Resource&quot;: &quot;*&quot;
        },
        {
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Action&quot;: [
                 &quot;tag:GetResources&quot;,
                 &quot;tag:TagResources&quot;
              ],
              &quot;Resource&quot;: &quot;*&quot;
        },
        {
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Action&quot;: [
                 &quot;waf:GetWebACL&quot;
              ],
              &quot;Resource&quot;: &quot;*&quot;
        },
        {
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Action&quot;: [
                 &quot;wafv2:GetWebACL&quot;,
                 &quot;wafv2:GetWebACLForResource&quot;,
                 &quot;wafv2:AssociateWebACL&quot;,
                 &quot;wafv2:DisassociateWebACL&quot;
              ],
              &quot;Resource&quot;: &quot;*&quot;
        },
        {
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Action&quot;: [
                 &quot;shield:DescribeProtection&quot;,
                 &quot;shield:GetSubscriptionState&quot;,
                 &quot;shield:DeleteProtection&quot;,
                 &quot;shield:CreateProtection&quot;,
                 &quot;shield:DescribeSubscription&quot;,
                 &quot;shield:ListProtections&quot;
              ],
              &quot;Resource&quot;: &quot;*&quot;
        }
     ]
  }
</code></pre>
<p><strong>Step 2.4:</strong> Click on <strong>Create Policy</strong></p>
<p><strong>Step 3:</strong>  Create an IAM role for the ALB Ingress Controller and attach the role to the service account</p>
<pre><code>  eksctl create iamserviceaccount \
     --region us-east-1 \
     --name aws-load-balancer-controller \
     --namespace kube-system \
     --cluster phonebook-eks-cluster \
     --attach-policy-arn arn:aws:iam::413403005747:policy/ALBIngressControllerIAMPolicy \
     --override-existing-serviceaccounts \
     --approve
</code></pre>
<p><strong>Step 4:</strong> Install cert-manager</p>
<p>cert-manager is a Kubernetes addon to automate the management and issuance of TLS certificates from various issuing sources. It will ensure certificates are valid and up to date periodically, and attempt to renew certificates at an appropriate time before expiry.</p>
<pre><code>  kubectl apply --validate=false -f https://github.com/jetstack/cert-manager/releases/download/v1.12.3/cert-manager.yaml
</code></pre>
<p><strong>Step 5:</strong> Deploy ALB Ingress Controller</p>
<p>Download the manifest file for the ALB Ingress Controller</p>
<pre><code>  wget https://github.com/kubernetes-sigs/aws-load-balancer-controller/releases/download/v2.7.0/v2_7_0_full.yaml
</code></pre>
<p>Edit the saved yaml file, go to the Deployment spec, and set the controller &ndash;cluster-name arg value to your EKS cluster name</p>
<pre><code>  apiVersion: apps/v1
  kind: Deployment
  . . .
  name: aws-load-balancer-controller
  namespace: kube-system
  spec:
     . . .
     template:
        spec:
              containers:
                 - args:
                    - --cluster-name=&lt;your-cluster-name&gt;
</code></pre>
<p>If you use IAM roles for service accounts, we recommend that you delete the ServiceAccount from the yaml spec. If you delete the installation section from the yaml spec, deleting the ServiceAccount preserves the eksctl created iamserviceaccoun
Apply the yaml file:</p>
<pre><code>  kubectl apply -f v2_7_0_full.yaml
</code></pre>
<p>We have successfully installed AWS ALB Ingress Controller:
<img alt="???" src="/images/003.5-k8s-app/3.png"></p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/3-migrate/3.3-k8s-app/" title="Deploy App-phonebook architecture using Kubernetes platform on AWS EKS cluster on AWS cloud environment"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/3-migrate/3.3-k8s-app/3.3.2-alb-ingress-manifest/" title="Create ALB Ingress manifest file" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1711032814"></script>
    <script src="/js/perfect-scrollbar.min.js?1711032814"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1711032814"></script>
    <script src="/js/jquery.sticky.js?1711032814"></script>
    <script src="/js/featherlight.min.js?1711032814"></script>
    <script src="/js/highlight.pack.js?1711032814"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1711032814"></script>
    <script src="/js/learn.js?1711032814"></script>
    <script src="/js/hugo-learn.js?1711032814"></script>

    <link href="/mermaid/mermaid.css?1711032814" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1711032814"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
